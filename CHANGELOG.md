# Changelog

## 1.5.0
- Added: 新增“正则脚本分组”（可选开关），支持分组启用/禁用、默认折叠、并对齐酒馆原生正则面板的拖拽调序体验。
- Fixed: 修复开启分组后在有聊天内容存档中开关正则导致的严重卡顿与 UI 闪烁（分组不会长时间消失后再重渲染）。
- Fixed: 修复主题切换后分组样式不会立刻更新的问题。
- Fixed: 修复三击菜单“清除标记”在不同主题下文字不可见的问题。
- Changed: 正则导入拦截范围仅限本扩展导出的分组包（不影响酒馆原生/其他插件的正则导入）。

## 1.4.9
- Fixed: 对条目列表、对比弹窗、确认弹窗、预览警告、预设下拉等涉及用户可控文本的 HTML 渲染进行统一转义/净化加固（防 XSS 注入）。
- Fixed: 字体大小滑块可一致影响条目标题与关键弹窗操作按钮（含“编辑条目”底部按钮），并会同步应用到已打开的子弹窗。

## 1.4.8
- Added: 世界书条目编辑弹窗加入 AI 辅助（格式转换/辅助创作），仅作用于标题/内容（comment/content）。
- Changed: 世界书条目“触发策略”改为下拉框（关键词/常驻），常驻时禁用关键词输入与次关键词匹配逻辑。
- Changed: 预设更新界面移除“重新计算”与“保留旧版启用状态”，转移到目标预设的条目默认全部不启用。

## 1.4.7
- Fixed: 开启角色懒加载（`performance.lazyLoadCharacters`）时，世界书“已绑定/未绑定”分组误判与重启后丢失的问题（引入持久缓存并后台补全角色数据）。
- Fixed: 打开“世界书条目转移工具”时因同步加载世界书列表导致的卡顿（先渲染 UI，再异步填充下拉列表）。
- Changed: 超大条目列表渲染改为分帧分块，降低主线程阻塞。

## 1.4.6
- Changed: 世界书条目分组渲染逻辑优化。
- Changed: 世界书常用收藏按钮事件绑定改为随条目渲染，减少重复监听。
## 1.4.5
- Added: 预设包导出可选“同时导出全局世界书”，导入时支持一并导入并设置为全局世界书。
- Changed: “导入/导出预设正则包”文案精简为“导入/导出预设包”。
- Changed: 导入确认弹窗与“转移工具”开关的按钮/勾选框等样式跟随酒馆主题（颜色工具）。
- Changed: 移除“检测到冲突”标题中的 emoji。

## 1.4.4
- Added: 世界书常用（跨世界书收藏条目）与“世界书常用”面板，可在面板内对条目/分组/整本世界书进行启用/禁用。
- Added: 世界书编辑器条目列表注入收藏星标按钮，用于快速加入/移除“世界书常用”。
- Added: 输入框区域新增“世界书常用”快捷按钮，点击打开面板。

## 1.4.3
- Changed: 世界书分组（世界书列表手动分组）状态改为优先保存到 SillyTavern `extensionSettings`，同一实例跨浏览器同步（旧 localStorage 自动迁移）。
- Changed: 转移工具设置（功能开关）改为优先保存到 SillyTavern `extensionSettings`，同一实例跨浏览器同步（旧 localStorage 自动迁移）。

## 1.4.2
- Changed: 全选/不选仅作用于搜索/筛选后可见的条目。
- Fixed：修复检测同预设不同版本命名过于严格的问题。

## 1.4.1
- Added: 世界书条目分组（世界书编辑器条目列表三连击标记分组开始/结束，生成分组头并可折叠）
- Added: 转移工具设置新增开关“世界书条目分组”

## 1.4.0
- Added: 世界书分组（含世界书选择下拉框分组展示与批量管理分组/拖拽排序）。
- Added: 默认两组（已绑定/未绑定）按当前绑定状态自动归类；支持关闭其中一组后仅归类另一组。

## 1.3.3
- Changed: 移除预设正则仅 rerender 可见消息的旧刷新逻辑，避免与第三方渲染器事件链不一致。（改为走 `reloadCurrentChat()` 的原生刷新链路）。

## 1.3.2
- Fixed: 切换美化/主题后立即打开预设面板时，分组 UI 未及时跟随新渲染的问题（监听设置/主题变化并触发分组刷新）。

## 1.3.1
- Changed: 条目状态保存列表的“应用”按钮改为横向不换行布局，操作区更紧凑。
- Changed: 条目状态保存/分组功能的编辑与删除按钮统一改为 Font Awesome 图标（铅笔/垃圾桶），并统一按钮尺寸与对齐。

## 1.3.0
- Added: 扩展设置页新增“转移工具”折叠面板，集中管理功能开关与导入/导出预设正则包。
- Changed: 条目状态/预设正则的旧圆形开关移除，开关统一迁移到扩展设置面板；关闭后不再注入对应原生面板且不加载相关监听。
- Added: 条目分组支持关闭（关闭时断开观察器并清理已注入的分组 UI）。
- Changed: 导入/导出预设正则包按钮移动到“转移工具”面板顶部，布局更紧凑对齐。
- Added: 全局搜索：可跨预设/世界书搜索条目，并以“转移模式”插入到任意面板点击的条目后方。
- Changed: 世界书转移遵循世界书自身排序逻辑，全局搜索中点击“转移条目”后通过点击左/右面板区域选择目标世界书（无需选择插入位置）。
- Changed: 搜索选项改为齿轮弹窗（跨预设搜索 / 含内容（可能卡顿）），并记住用户选择（首次默认全不勾选）。

## 1.2.0
- Added: 新增“新建世界书条目”功能。
- Removed: 删除“世界书查看新增条目”功能。
- Fixed: 修复手机端世界书编辑界面“启用”开关布局异常（与当前条目区域对齐）。

## 1.1.3
- Maintenance: 发布版本用于验证更新提示与一键更新流程。

## 1.1.2
- Fixed: 一键更新请求补齐 CSRF Token，避免出现 “Forbidden”。

## 1.1.1
- Changed: 更新提示按钮改为云朵下载图标，提升辨识度。

## 1.1.0
- Added: 世界书（Worldbook）条目转移与编辑能力，统一到同一套操作体验中。
- Changed: 复制/移动等核心逻辑重构为 Adapter 架构，支持不同容器类型复用同一套流程。
- Added: 扩展更新推送（页面初始化检查一次），发现新版本时在字体按钮右侧提示并支持一键更新后自动刷新。

## 1.0.0
- Added: 初始版本。
